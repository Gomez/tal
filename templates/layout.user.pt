<!DOCTYPE html>
<html metal:define-macro="page">
<head>
	<title tal:define="pretitle php:(!empty(application)) ? application . ' | ' : null" tal:content="string:${pretitle} ownCloud (${user}@${server/SERVER_NAME})">
		Scripts and Styles
	</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="shortcut icon" href="/owncloud/core/img/favicon.png" tal:attributes="href string:${webroot}/core/img/favicon.png" />
	<link rel="apple-touch-icon-precomposed" href="favicon-touch.png" tal:attributes="href string:${webroot}/core/img/favicon-touch.png" />
	<tal:block tal:repeat="style styles">
	<link rel="stylesheet" href="/owncloud/core/css/styles.css" type="text/css" media="screen" tal:attributes="href style" />
	</tal:block>

	<script type="text/javascript">
	var oc_debug = <span tal:replace="php:(DEBUG ? 'true' : 'false')" />;
	var oc_webroot = '${webroot}';
	var oc_appswebroots = ${structure apps_paths};
	var oc_current_user = '${user}';
	var oc_requesttoken = '${requesttoken}';

	var dayNames = ${structure dayNames};
	var monthNames = ${structure monthNames};
	var firstDay = ${structure firstDay};

	</script>

	<tal:block tal:repeat="script scripts">
	<script type="text/javascript" tal:attributes="src script"></script>
	</tal:block>
	<script type="text/javascript">
		requesttoken = '${requesttoken}';
		OC.EventSource.requesttoken=requesttoken;
		$(document).bind('ajaxSend', function(elm, xhr, s) {
			xhr.setRequestHeader('requesttoken', requesttoken);
		});
	</script>

	<tal:block tal:repeat="header headers">
		<tal:block tal:replace='structure string:${header/tag}' /> <tal:block tal:repeat="attribute header/attributes"><tal:block tal:replace='structure string:${repeat/attribute/key}="${attribute}"' /></tal:block> />
	</tal:block>
</head>
<body tal:attributes="id bodyid">
<header>
	<div id="header" tal:define="index linkto:string:/index.php">
		<a id="owncloud" tal:attributes="href index"><img class="svg" tal:attributes="src image:string:logo-wide.svg" src="logo-wide.svg" alt="ownCloud" /></a>

		<ul id="settings" class="svg">
			<span id="expand">
				<?php echo OCP\User::getDisplayName($user=null)?OCP\User::getDisplayName($user=null):(OC_User::getUser()?OC_User::getUser():'') ?>
				<img class="svg" src="actions/caret.svg" tal:attributes="src image:string:core/actions/caret.svg"/>
			</span>
			<div id="expanddiv"
				tal:attributes="class structure php:bodyid EQ 'body-user' ? 'hidden' : nothing">
				<li tal:repeat="entry settingsnavigation">
					<a tal:attributes="href entry/href;class php:entry['active']?'active':''">
						<img class="svg" alt="" tal:attributes="src entry/icon" />
						<span tal:replace="entry/name">Name</span>
					</a>
				</li>
				<li>
					<a class="header-right header-action" id="logout" tal:attributes="href string:${index}?logout=true">
						<img class="svg"
							tal:attributes="src image:string:/actions/logout.svg"
							i18n:attributes="alt;title" alt="Log out" title="Log out" src="actions/logout.svg" />
						<span i18n:translate="">Log out</span>
					</a>
				</li>
			</div>
		</ul>

		<form class="searchbox header-right" action="#" method="post">
			<input id="searchbox" class="svg" type="search" name="query" tal:attributes="value request/post/query|nothing" value="" autocomplete="off" />
		</form>
	</div>
</header>

<nav i18n:domain="core">
	<div id="navigation">
	<ul id="apps" class="svg">
		<li tal:repeat="entry navigation">
			<a tal:attributes="href entry/href;title entry/name;class php:entry['active']?'active':null">
			<img class="icon" alt="" tal:attributes="src entry/icon" />
			<span tal:replace="entry/name">Name</span></a>
		</li>
	</ul>

	</div>
</nav>

<div id="content-wrapper">
	<div id="content" metal:define-slot="content">
      This is the content.
	</div>
</div>
</body>
</html>